/*! WP Pretty Fields - v1.1.0
 * https://alessandrotesoro.me
 * Copyright (c) 2015; * Licensed GPLv2+ */
jQuery(document).ready(function(){mediaControl.init(),GalleryControl.init(),TabControl.init(),jQuery(".wppf-colorpicker").length>0&&jQuery(".wppf-colorpicker").wpColorPicker()});var wppf_image_container,wppf_frame_title,wppf_button_label;mediaControl={frame:function(){return this._frame?this._frame:(this._frame=wp.media({title:wppf_frame_title,frame:"select",library:{type:"image"},button:{text:wppf_button_label},multiple:!1}),this._frame.on("open",this.updateFrame).state("library").on("select",this.select),this._frame)},select:function(){var a=mediaControl.frame().state().get("selection").first().toJSON();jQuery(wppf_image_container).val(a.url)},init:function(){jQuery("body").on("click",".wppf-open-media",function(a){a.preventDefault(),wppf_image_container=jQuery(this).data("inputid"),wppf_frame_title=jQuery(this).data("frame"),wppf_button_label=jQuery(this).data("button"),mediaControl.frame().open()})}};var wppf_gallery_ids,wppf_get_gallery_list,wppf_get_gallery_field,wppf_window_title,wppf_window_button;GalleryControl={frame:function(){return this._frame?this._frame:(this._frame=wp.media({title:wppf_window_title,library:{type:"image"},button:{text:wppf_window_button},multiple:"toggle"}),this._frame.on("open",this.updateFrame).state("library").on("select",this.select),this._frame)},select:function(){var a=GalleryControl._frame.state().get("selection").toJSON(),b="";jQuery(wppf_get_gallery_list).empty(),jQuery(a).each(function(a){jQuery(wppf_get_gallery_list).append('<li><input type="hidden" name="'+wppf_get_gallery_field+"["+a+'][id]" value="'+this.id+'"><input type="hidden" name="'+wppf_get_gallery_field+"["+a+'][url]" value="'+this.url+'"><img src="'+this.url+'"/></li>'),b+=this.id+","}),b=b.substr(0,b.length-1),jQuery("#"+wppf_get_gallery_field).data("ids",b)},updateFrame:function(){var a=GalleryControl.frame().state().get("selection");a.reset();var b="";if(wppf_gallery_ids)var b=wppf_gallery_ids.split(",");""!==b&&jQuery.each(b,function(b,c){var d=wp.media.attachment(c);d.fetch(),a.add(d?[d]:[])})},init:function(){jQuery("body").on("click",".wppf-open-gallery",function(a){a.preventDefault(),wppf_get_gallery_field=jQuery(this).attr("id"),wppf_gallery_ids=jQuery(this).data("ids"),wppf_get_gallery_list=jQuery(this).data("list"),wppf_window_title=jQuery(this).data("title"),wppf_window_button=jQuery(this).data("button"),GalleryControl.frame().open()}),jQuery(".wppf-delete-gallery").click(function(a){a.preventDefault();var b=jQuery(this).data("del"),c=confirm(b);1==c&&(wppf_delete_list=jQuery(this).data("list"),jQuery(wppf_delete_list).empty(),wppf_trigger_gallery=jQuery(this).parent("div").prev("div.action-left").find("a"),wppf_gallery_ids=jQuery(wppf_trigger_gallery).data("ids"),jQuery(wppf_trigger_gallery).data("ids",null))})}};var wppf_get_tabs_list;TabControl={init:function(){wppf_get_metabox=jQuery("body").find(".wppf_metabox"),jQuery(wppf_get_metabox).each(function(a,b){var c="#"+b.id;wppf_get_tabs_list=jQuery(c).find(".wppf-tab-field"),jQuery(wppf_get_tabs_list).length&&(TabControl.add_tab_group(c),TabControl.add_single_tab(c,wppf_get_tabs_list),TabControl.run_tabs(c))})},add_tab_group:function(a){var b=jQuery(a).find("table.wppf-options-table");jQuery(b).parent().addClass("wppf-table-wrap").before('<ul class="wppf-data-tabs wppf-tabs" style=""></ul>')},add_single_tab:function(a,b){jQuery(b).each(function(b,c){var d=c.id,e="#"+d,f=jQuery(e).data("name"),g="wppf-single-tab",h=e.replace("wppf-tab-",""),i='<li class="'+g+'"><a href="#wppf-group-'+d+'">'+f+"</a></li>",j=jQuery(a).find("ul.wppf-data-tabs");jQuery(j).append(i),TabControl.create_group(h,d)})},create_group:function(a,b){jQuery(a).nextUntil(".wppf-type-tab").wrapAll('<tbody class="wppf-single-tab-group" id="wppf-group-'+b+'"></tbody>'),jQuery(".wppf-options-table tbody:first-child").children().unwrap()},run_tabs:function(a){jQuery(a).tabs()}};